# ============================================
# Stash Auto Vision - CPU Configuration
# ============================================
# Copy this file to .env for CPU-only platforms

# Media Paths
# Path to your test video files (will be mounted to /media/videos in containers)
# Testing with Charades dataset for frame/scene testing
TEST_MEDIA_PATH=/tests/data
# Path to your live video files (will be mounted to /data in containers)
SERVER_MEDIA_PATH=/mnt/user/movies

# Docker Configuration
DOCKER_NETWORK=stash-auto-vision-network
DOCKER_RUNTIME=runc

# Service Ports
VISION_API_PORT=5010
FRAME_SERVER_PORT=5001
SCENES_PORT=5002
FACES_PORT=5003
SEMANTICS_PORT=5004
OBJECTS_PORT=5005
REDIS_PORT=6379

# Frame Server (CPU Mode)
FRAME_SERVER_DOCKERFILE=Dockerfile.cpu
FRAME_EXTRACTION_METHOD=opencv_cpu
OPENCV_DEVICE=cpu
ENABLE_FALLBACK=true  # Enable automatic fallback: opencv -> pyav_hw -> pyav_sw -> ffmpeg
ENABLE_ENHANCEMENT=false  # Enable face enhancement
ENHANCEMENT_MODEL=codeformer  # gfpgan or codeformer

# Scenes Service (CPU Mode)
SCENES_DOCKERFILE=Dockerfile.cpu
SCENES_DETECTOR=pyscenedetect_cpu
SCENES_THRESHOLD=27.0  # Default threshold for ContentDetector (0.0-100.0, can be overridden per-request)

# Faces Service (CPU Mode)
FACES_DOCKERFILE=Dockerfile.cpu
INSIGHTFACE_MODEL=buffalo_l
INSIGHTFACE_DEVICE=cpu
INSIGHTFACE_COMPUTE_TYPE=int8
FACES_MIN_CONFIDENCE=0.9  # Default confidence threshold (0.0-1.0, can be overridden per-request)
FACES_MIN_QUALITY=0.0  # Default minimum quality threshold (0.0-1.0, can be overridden per-request)
FACES_ENHANCEMENT_QUALITY_TRIGGER=0.5  # Default quality trigger for enhancement (0.0-1.0, can be overridden per-request)
IQA_MODEL=topiq  # Model for IQA inference (topiq, clipiqa, sobel)

# Semantics Service (CPU Mode) - Phase 2+
SEMANTICS_DOCKERFILE=Dockerfile.cpu
CLIP_MODEL=ViT-B/32
CLIP_DEVICE=cpu
SEMANTICS_STUB_MODE=true  # Set to false when implementing
SEMANTICS_MIN_CONFIDENCE=0.5  # Default confidence threshold for CLIP (0.0-1.0, can be overridden per-request)

# Objects Service (CPU Mode) - Phase 2+
OBJECTS_DOCKERFILE=Dockerfile.cpu
YOLO_MODEL=yolo-world-s  # Smaller model for CPU
YOLO_DEVICE=cpu
OBJECTS_STUB_MODE=true  # Set to false when implementing
OBJECTS_MIN_CONFIDENCE=0.5  # Default confidence threshold for YOLO (0.0-1.0, can be overridden per-request)

# Cache Configuration
CACHE_TTL=3600  # seconds (1 hour)

# Frame Storage Configuration
FRAME_TTL_HOURS=2  # Automatic cleanup after 2 hours
FRAME_DIR=/tmp/frames

# Processing
PROCESSING_MODE=sequential  # Parallel not recommended on CPU

# Logging
LOG_LEVEL=DEBUG  # More verbose for development
